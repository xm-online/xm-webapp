@if (config() && items()) {
  <div class="virtual-scroll-widget-container">
    @if (isLoading()) {
      <div class="virtual-scroll-widget-container__loading">
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
      </div>
    }
    <cdk-virtual-scroll-viewport
      [itemSize]="config().itemSize"
      [minBufferPx]="config().minBufferPx || window.innerHeight"
      [maxBufferPx]="config().maxBufferPx || window.innerHeight + 200"
      [class]="config().theme?.class"
      [style]="config().theme?.style"
      [attr.data-qa]="config().dataQa">
      <ng-container *cdkVirtualFor="let item of items()">
        <ng-container
          xmDynamicPresentation
          [class]="config()?.layout.theme?.class"
          [style]="config()?.layout.theme?.style"
          [selector]="config()?.layout.selector"
          [config]="config()?.layout.config"
          [controllers]="config()?.layout.controllers"
          [dataQa]="config()?.layout.dataQa"
          [value]="item"
        ></ng-container>
      </ng-container>
    </cdk-virtual-scroll-viewport>
  </div>
}
