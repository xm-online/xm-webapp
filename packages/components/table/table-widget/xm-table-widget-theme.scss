@use 'sass:color';

@mixin xm-table-highlighted-row-styles($theme) {
  $app-surface: map-get($theme, surface);
  $app-on-surface: map-get($theme, on-surface);

  background: color.mix($app-on-surface, $app-surface, 8%);
}

@mixin xm-table-error-row-styles($theme) {
  $app-error: map-get($theme, primary);

  background: mix(white, $app-error, 90%);
}


@mixin xm-table-theme($xm-theme) {

  .xm-table-widget .xm-table-row-background.xm-table-row-selected {
    $xm-primary:      map-get($xm-theme, primary);
    background-color: rgba($xm-primary, .1);;
  }

  .xm-table-widget .xm-table-row-background.xm-table-row-loading {
    opacity: .3;
  }

  .xm-table-widget tr.xm-table-hoverable-row:hover {
    $xm-surface: map-get($xm-theme, surface);
    background:  $xm-surface;
  }

  .xm-table-widget tr.xm-table-row-highlight:hover {
    @include xm-table-highlighted-row-styles($xm-theme);
  }

  .xm-table-widget tr.xm-table-highlighted-row {
    @include xm-table-highlighted-row-styles($xm-theme);
  }

  .xm-table-widget.animation-active * {
    transition: none !important;
  }

  .xm-table-widget.xm-table-fullscreen {
    position: fixed;
    inset: 72px 0 0 94px;
    z-index: 1000;

    mat-card {
      display: flex;
      flex-direction: column;
      height: 100%;
      min-height: 0;
      min-width: 0;

      .xm-table-wrapper {
        display: flex;
        flex-direction: column;
        flex-grow: 1;
        min-height: 0;
        min-width: 0;

        .xm-table-overflow-wrap {
          flex-grow: 1;
          max-height: none !important;
          min-height: 0;
          min-width: 0;

          table {
            height: 100%;

            tbody {
              height: calc(100% - 56px);
            }
          }
        }
      }
    }
  }
  
  .xm-table-widget tr.xm-table-row-error {
    @include xm-table-error-row-styles($xm-theme)
  }

  .header-container {
    $xm-surface:      map-get($xm-theme, surface);
    $xm-primary:      map-get($xm-theme, primary);

    color:            $xm-primary;
    background-color: lighten($xm-primary, 60%);
  }
}
